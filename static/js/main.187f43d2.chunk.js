(this["webpackJsonpcat-walk"]=this["webpackJsonpcat-walk"]||[]).push([[0],{11:function(e,t,n){},15:function(e,t,n){"use strict";n.r(t);var i=n(0),o=n(1),r=n.n(o),c=n(5),s=n.n(c),a=(n(11),n(2));function d(e){for(var t=e.tileset,n=e.position,o=e.size,r=e.activeTile,c=e.setActiveTile,s=o.width,a=o.height,d=[],u=0,l=0;l<a;l+=32){for(var p=[],b=0;b<s;b+=32)p.push({x:b,y:l,id:u++});d.push(p)}return console.dir(d),Object(i.jsxs)("div",{id:"palette",style:{position:"absolute",border:"1px solid black",top:n.y,left:n.x,zIndex:100,backgroundColor:"white"},children:[Object(i.jsx)("img",{id:"handle",src:"/img/drag-handle.png",alt:""}),Object(i.jsx)("div",{style:{borderTop:"1px solid black",borderRight:"1px solid black",background:"url(/sprites/zones/".concat(t,".png) -").concat(r.x,"px -").concat(r.y,"px no-repeat")}}),d.map((function(e,n){return Object(i.jsx)("div",{style:{display:"flex"},children:e.map((function(e,o){return Object(i.jsx)("div",{onClick:function(){return c({x:32*o,y:32*n})},style:{borderTop:"1px solid black",borderRight:"1px solid black",background:"url(/sprites/zones/".concat(t,".png) -").concat(32*o,"px -").concat(32*n,"px no-repeat"),width:32,height:32}})}))})}))]})}var u=n(4);n(12);function l(e){var t=e.tiles,n=e.setTiles,o=e.activeTile,r=e.tileset,c=e.size;function s(e){var t=e.x,i=e.y;n((function(e){var n=function(e){for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=e[n].slice(0);return t}(e),r=Object(u.a)(Object(u.a)({},n[i][t]),{},{v:o});return n[i][t]=r,n}))}return Object(i.jsx)("div",{style:{boxSizing:"border-box",backgroundColor:"white",width:c.width},children:t.map((function(e,t){return Object(i.jsx)("div",{style:{display:"flex"},children:e.map((function(e,n){return Object(i.jsx)("div",{onClick:function(){return s({x:n,y:t})},style:{borderTop:"1px solid black",borderRight:"1px solid black",background:"url(/sprites/zones/".concat(r,".png) -").concat(e.v.x,"px -").concat(e.v.y,"px no-repeat"),width:32,height:32}})}))})}))})}function p(e){var t=e.image,n=e.data,o=e.position,r=n.y,c=n.x,s=n.h,a=n.w;return Object(i.jsx)("div",{style:{position:"absolute",top:o.y,left:o.x,height:"".concat(s,"px"),width:"".concat(a,"px"),backgroundImage:"url(".concat(t,")"),backgroundRepeat:"no-repeat",backgroundPosition:"-".concat(c,"px -").concat(r,"px")}})}function b(e){var t=e.sprite,n=e.data,o=e.position,r=void 0===o?{x:0,y:0}:o,c=e.step,s=void 0===c?0:c,a=e.dir,d=void 0===a?0:a,u=n.h,l=n.w;return Object(i.jsx)(p,{image:t,position:r,data:{x:s*l,y:d*u,w:l,h:u}})}function h(e){var t=Object(o.useState)({x:0,y:0}),n=Object(a.a)(t,2),i=n[0],r=n[1],c=Object(o.useState)(0),s=Object(a.a)(c,2),d=s[0],u=s[1],l=Object(o.useState)(0),p=Object(a.a)(l,2),b=p[0],h=p[1],x={down:0,left:1,right:2,up:3},v={down:{x:0,y:16},left:{x:-16,y:0},right:{x:16,y:0},up:{x:0,y:-16}};return{walk:function(t){console.dir(x[t]),u((function(e){return x[t]===e&&function(e){r((function(t){return{x:t.x+v[e].x,y:t.y+v[e].y}}))}(t),x[t]})),h((function(t){return t<e-1?t+1:0}))},dir:d,step:b,position:i}}function x(e){var t,n=e.skin,r=h(3),c=r.dir,s=r.step,a=r.walk,d=r.position;return t=function(e){a(e.key.replace("Arrow","").toLowerCase()),e.preventDefault()},Object(o.useEffect)((function(){return window.addEventListener("keydown",t),function(){return window.removeEventListener("keydown",t)}}),[t]),Object(i.jsx)(b,{sprite:"/sprites/skins/".concat(n,".png"),data:{h:32,w:32},step:s,dir:c,position:d})}var v={position:"absolute",right:"300px",top:"1px",width:"300px",height:"500px",color:"white"};function j(){var e=Object(o.useState)("grasslands_1"),t=Object(a.a)(e,2),n=t[0],r=(t[1],Object(o.useState)({x:32,y:128})),c=Object(a.a)(r,2),s=c[0],u=c[1],p=Object(o.useState)([]),b=Object(a.a)(p,2),h=b[0],j=b[1],y=Object(o.useState)({width:800,height:600}),f=Object(a.a)(y,2),w=f[0],g=(f[1],function(e){var t=Object(o.useState)({x:0,y:0}),n=Object(a.a)(t,2),i=n[0],r=n[1];function c(e){var t={x:e.clientX,y:e.clientY};r(t)}return Object(o.useEffect)((function(){var t=document.getElementById(e);return t.addEventListener("mousedown",(function(e){e.preventDefault(),t.style.pointerEvents="none",document.body.addEventListener("mousemove",c),document.body.addEventListener("mouseup",(function(){document.body.removeEventListener("mousemove",c),t.style.pointerEvents="initial"}))})),function(){document.body.removeEventListener("mousedown",c),document.body.removeEventListener("mouseup",c),document.body.removeEventListener("mousemove",c)}}),[]),{position:i}}("handle").position);return Object(o.useEffect)((function(){for(var e=[],t=0,n=0;n<w.height;n+=32){for(var i=[],o=0;o<w.width;o+=32)i.push({x:o,y:n,id:t++,v:{x:-32,y:-32}});e.push(i)}j(e)}),[]),Object(i.jsx)(i.Fragment,{children:Object(i.jsxs)("div",{style:{position:"absolute",width:window.innerWidth,height:window.innerHeight,backgroundColor:"grey",overflow:"hidden",border:"1px solid black"},children:[Object(i.jsx)(l,{tiles:h,tileset:n,size:w,activeTile:s,setTiles:j}),Object(i.jsxs)("div",{style:v,children:[Object(i.jsx)("h1",{children:"Hello, take the cat for a walk please."}),Object(i.jsx)("p",{children:"Just move that pesky map maker to the side and you will see him. While you are at it, create a world with that map maker. (use your arrow keys to move the cat)"})]}),Object(i.jsx)(d,{position:g,tileset:n,activeTile:s,setActiveTile:u,size:{height:288,width:640}}),Object(i.jsx)(l,{tiles:h,tileset:n,size:w,activeTile:s,setTiles:j}),Object(i.jsx)(x,{skin:"Cat"})]})})}s.a.render(Object(i.jsx)(r.a.StrictMode,{children:Object(i.jsx)(j,{})}),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.187f43d2.chunk.js.map